<div class="debug-container">
  <h2>Debug User BangVe Data</h2>
  
  <div class="debug-section">
    <h3>Current User Info</h3>
    <div class="info-card">
      <p><strong>Email:</strong> {{ currentUser?.email || 'N/A' }}</p>
      <p><strong>UID:</strong> {{ currentUser?.uid || 'N/A' }}</p>
      <p><strong>Firestore ID:</strong> {{ currentUserFromFirestore?.id || 'N/A' }}</p>
      <p><strong>Firestore UID:</strong> {{ currentUserFromFirestore?.uid || 'N/A' }}</p>
    </div>
  </div>

  <div class="debug-section">
    <h3>All User BangVe Records ({{ allUserBangVe.length }})</h3>
    <button (click)="refreshData()" [disabled]="isLoading">
      {{ isLoading ? 'Loading...' : 'Refresh Data' }}
    </button>
    
    <div class="data-table" *ngIf="allUserBangVe.length > 0">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User ID</th>
            <th>Firebase UID</th>
            <th>BangVe ID</th>
            <th>BD Ha ID</th>
            <th>BD Cao ID</th>
            <th>BD Ep ID</th>
            <th>Khau SX</th>
            <th>Trang Thai</th>
            <th>Trang Thai BD Ha</th>
            <th>Trang Thai BD Cao</th>
            <th>Trang Thai BD Ep</th>
            <th>Assigned At</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let record of allUserBangVe">
            <td>{{ record.id }}</td>
            <td>{{ record.user_id }}</td>
            <td>{{ record.firebase_uid }}</td>
            <td>{{ record.bangve_id }}</td>
            <td>{{ record.bd_ha_id }}</td>
            <td>{{ record.bd_cao_id }}</td>
            <td>{{ record.bd_ep_id }}</td>
            <td>{{ record.khau_sx }}</td>
            <td>{{ record.trang_thai }}</td>
            <td>{{ record.trang_thai_bd_ha }}</td>
            <td>{{ record.trang_thai_bd_cao }}</td>
            <td>{{ record.trang_thai_bd_ep }}</td>
            <td>{{ record.assigned_at | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div *ngIf="allUserBangVe.length === 0" class="no-data">
      <p>No user_bangve records found in Firebase</p>
    </div>
  </div>

  <div class="debug-section">
    <h3>Current User Assignments ({{ currentUserAssignments.length }})</h3>
    
    <div class="data-table" *ngIf="currentUserAssignments.length > 0">
      <table>
        <thead>
          <tr>
            <th>ID</th>
            <th>User ID</th>
            <th>Firebase UID</th>
            <th>BangVe ID</th>
            <th>BD Ha ID</th>
            <th>BD Cao ID</th>
            <th>BD Ep ID</th>
            <th>Khau SX</th>
            <th>Trang Thai</th>
            <th>Trang Thai BD Ha</th>
            <th>Trang Thai BD Cao</th>
            <th>Trang Thai BD Ep</th>
            <th>Assigned At</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let assignment of currentUserAssignments">
            <td>{{ assignment.id }}</td>
            <td>{{ assignment.user_id }}</td>
            <td>{{ assignment.firebase_uid }}</td>
            <td>{{ assignment.bangve_id }}</td>
            <td>{{ assignment.bd_ha_id }}</td>
            <td>{{ assignment.bd_cao_id }}</td>
            <td>{{ assignment.bd_ep_id }}</td>
            <td>{{ assignment.khau_sx }}</td>
            <td>{{ assignment.trang_thai }}</td>
            <td>{{ assignment.trang_thai_bd_ha }}</td>
            <td>{{ assignment.trang_thai_bd_cao }}</td>
            <td>{{ assignment.trang_thai_bd_ep }}</td>
            <td>{{ assignment.assigned_at | date:'short' }}</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div *ngIf="currentUserAssignments.length === 0" class="no-data">
      <p>No assignments found for current user</p>
    </div>
  </div>
</div>
