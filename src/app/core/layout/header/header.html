<header class="header">
  <div class="header-left">
    <button class="hamburger-btn" (click)="toggleSidebar()">
      <mat-icon>menu</mat-icon>
    </button>
    <div class="breadcrumb">
      <span class="breadcrumb-item">Thibidi</span>
      <mat-icon class="breadcrumb-separator">chevron_right</mat-icon>
      <span class="breadcrumb-item active">Hệ thống Quản lý Sản Xuất</span>
    </div>
  </div>
  
  <div class="header-right">
    <div class="header-actions">
      <button mat-icon-button matTooltip="Trợ giúp">
        <mat-icon>help_outline</mat-icon>
      </button>
      <button mat-icon-button matTooltip="Thông báo">
        <mat-icon>notifications</mat-icon>
        <span class="notification-badge">3</span>
      </button>
      
      <!-- User Profile Dropdown -->
      @if (currentUser) {
        <div class="user-profile-dropdown">
          <button mat-icon-button [matMenuTriggerFor]="userProfileMenu" class="profile-trigger">
            <div class="user-avatar">
              {{ getUserInitials(currentUser) }}
            </div>
          </button>
          
          <mat-menu #userProfileMenu="matMenu" class="profile-dropdown" [overlapTrigger]="false">
            <!-- User Info Header -->
            <div class="profile-header">
              <div class="profile-avatar">
                {{ getUserInitials(currentUser) }}
              </div>
              <div class="profile-info">
                <div class="profile-name">{{ currentUser.displayName || currentUser.email }}</div>
                <div class="profile-email">{{ currentUser.email }}</div>
                <div class="profile-role">{{ getRoleDisplayName(currentUser.role) }}</div>
              </div>
            </div>
            
            <mat-divider></mat-divider>
            
            <!-- Menu Items -->
            <button mat-menu-item class="profile-menu-item">
              <mat-icon>person</mat-icon>
              <span>Thông tin cá nhân</span>
            </button>
            
            <button mat-menu-item class="profile-menu-item">
              <mat-icon>settings</mat-icon>
              <span>Cài đặt</span>
            </button>
            
            <mat-divider></mat-divider>
            
            <button mat-menu-item class="profile-menu-item logout-item" (click)="logout()">
              <mat-icon>logout</mat-icon>
              <span>Đăng xuất</span>
            </button>
          </mat-menu>
        </div>
      }
    </div>
  </div>
</header>